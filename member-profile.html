<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile - SUNYANI MUNICIPAL WELFARE</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <h1>üåÖ SUNYANI MUNICIPAL WELFARE</h1>
                <div class="header-actions">
                    <span class="welcome-msg" id="welcomeMessage">Welcome, Member</span>
                    <button onclick="location.href='member-dashboard.html'" class="logout-btn">‚Üê Dashboard</button>
                    <button onclick="logout()" class="logout-btn">Logout</button>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="main-nav">
            <a href="member-dashboard.html" class="nav-link">üè† My Dashboard</a>
            <a href="member-profile.html" class="nav-link active">üë§ My Profile</a>
            <a href="member-contributions.html" class="nav-link">üí∞ My Contributions</a>
            <a href="member-welfare.html" class="nav-link">üõ°Ô∏è Welfare Services</a>
            <a href="member-withdrawals.html" class="nav-link">üèß My Withdrawals</a>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <div class="page-header">
                <h2>My Profile</h2>
                <p>Manage your personal information and account settings</p>
                <button class="btn-primary" onclick="toggleEditMode()" id="editProfileBtn">‚úèÔ∏è Edit Profile</button>
            </div>

            <!-- Profile Summary -->
            <div class="profile-summary">
                <div class="profile-header">
                    <div class="profile-avatar">
                        <div class="avatar-placeholder">üë§</div>
                    </div>
                    <div class="profile-info">
                        <h3 id="profileName">Loading...</h3>
                        <p class="profile-id">Member ID: <span id="profileMemberId">-</span></p>
                        <p class="profile-status">Status: <span id="profileStatus" class="status-active">Active</span></p>
                    </div>
                </div>
                
                <div class="profile-stats">
                    <div class="profile-stat">
                        <span class="stat-label">Total Contributions</span>
                        <span class="stat-value" id="totalContributionsStat">GH‚Çµ 0.00</span>
                    </div>
                    <div class="profile-stat">
                        <span class="stat-label">Member Since</span>
                        <span class="stat-value" id="memberSinceStat">-</span>
                    </div>
                    <div class="profile-stat">
                        <span class="stat-label">Last Login</span>
                        <span class="stat-value" id="lastLoginStat">-</span>
                    </div>
                </div>
            </div>

            <!-- Profile Form -->
            <div class="form-container">
                <form id="profileForm">
                    <div class="form-section">
                        <h3>Personal Information</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="profileFullName">Full Name *</label>
                                <input type="text" id="profileFullName" required disabled>
                            </div>
                            <div class="form-group">
                                <label for="profileEmail">Email Address *</label>
                                <input type="email" id="profileEmail" required disabled>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="profilePhone">Phone Number *</label>
                                <input type="tel" id="profilePhone" required disabled>
                            </div>
                            <div class="form-group">
                                <label for="profileOccupation">Occupation</label>
                                <input type="text" id="profileOccupation" disabled>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="profileAddress">Residential Address</label>
                            <textarea id="profileAddress" rows="3" disabled></textarea>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Membership Information</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="profileMonthlyContribution">Monthly Contribution (GH‚Çµ) *</label>
                                <input type="number" id="profileMonthlyContribution" min="10" step="0.01" required disabled>
                            </div>
                            <div class="form-group">
                                <label for="profileJoinDate">Join Date</label>
                                <input type="text" id="profileJoinDate" disabled>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Security Settings</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="profilePassword">New Password</label>
                                <input type="password" id="profilePassword" placeholder="Leave blank to keep current" disabled>
                            </div>
                            <div class="form-group">
                                <label for="profileConfirmPassword">Confirm New Password</label>
                                <input type="password" id="profileConfirmPassword" placeholder="Confirm new password" disabled>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions" id="profileFormActions" style="display: none;">
                        <button type="button" class="btn-secondary" onclick="cancelEdit()">Cancel</button>
                        <button type="submit" class="btn-primary">üíæ Save Changes</button>
                    </div>
                </form>
            </div>

            <!-- Account Actions -->
            <div class="account-actions">
                <h3>Account Actions</h3>
                <div class="action-buttons">
                    <button class="btn-secondary" onclick="downloadMemberStatement()">üìÑ Download Statement</button>
                    <button class="btn-secondary" onclick="changePassword()">üîí Change Password</button>
                    <button class="btn-danger" onclick="deactivateAccount()">üö´ Deactivate Account</button>
                </div>
            </div>
        </main>
    </div>

    <script src="js/firebase-config.js"></script>
    <script src="js/member-profile.js"></script>
</body>
</html>